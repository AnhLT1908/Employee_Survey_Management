@{
    ViewData["Title"] = "Bảng điều khiển (Admin)";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section Styles {
    <link rel="stylesheet" href="~/css/admin.css" asp-append-version="true" />
}

<div class="admin-page">
    <div class="container py-4">

        <div class="page-heading d-flex align-items-center justify-content-between mb-4">
            <div>
                <h2 class="mb-1 fw-bold">Bảng điều khiển <span class="badge bg-secondary ms-1">Admin</span></h2>
                <p class="text-muted mb-0">Trung tâm quản trị hệ thống</p>
            </div>
        </div>

        <!-- Tabs điều hướng -->
        <ul class="nav nav-pills admin-tabs mb-4">
            <li class="nav-item"><a class="nav-link active" asp-area="Admin" asp-controller="Home" asp-action="Index">Dashboard</a></li>
            <li class="nav-item">
                <a class="nav-link" asp-area="Admin" asp-controller="Users" asp-action="Index">Quản lý người dùng</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" asp-area="Admin" asp-controller="Departments" asp-action="Index">Quản lý phòng ban</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" asp-area="Admin" asp-controller="Questions" asp-action="Index">Quản lý câu hỏi</a>
            </li>
            <li class="nav-item"><a class="nav-link" asp-area="Admin" asp-controller="Tests" asp-action="Index">Quản lý bài test</a></li>
            <li class="nav-item"><a class="nav-link" asp-area="Admin" asp-controller="Grading" asp-action="Index">Chấm điểm & đánh giá</a></li>
            <li class="nav-item"><a class="nav-link" asp-area="Admin" asp-controller="Settings" asp-action="Index">Cấu hình hệ thống</a></li>
            <li class="nav-item"><a class="nav-link" asp-area="Admin" asp-controller="Skills" asp-action="Index">Quản lý kỹ năng</a></li>
        </ul>

        <!-- Lưới thẻ nhanh (chỉ chữ, không icon) -->
        <div class="row g-3 row-cols-1 row-cols-md-2 row-cols-lg-3">
            <div class="col">
                <a class="admin-card d-block text-decoration-none" asp-area="Admin" asp-controller="Users" asp-action="Index">
                    <div class="card h-100 shadow-sm">
                        <div class="card-body">
                            <h5 class="card-title mb-1">Quản lý người dùng</h5>
                            <p class="card-text text-muted">Thêm/sửa/xóa nhân viên, phân quyền, phòng ban.</p>
                        </div>
                    </div>
                </a>
            </div>


            <div class="col">
                <a class="admin-card d-block text-decoration-none" asp-area="Admin" asp-controller="Departments" asp-action="Index">
                    <div class="card h-100 shadow-sm">
                        <div class="card-body">
                            <h5 class="card-title mb-1">Quản lý phòng ban</h5>
                            <p class="card-text text-muted">Thêm/sửa/xóa phòng ban, phân bổ nhân viên.</p>
                        </div>
                    </div>
                </a>
            </div>

            <div class="col">
                <a class="admin-card d-block text-decoration-none" asp-area="Admin" asp-controller="Questions" asp-action="Index">
                    <div class="card h-100 shadow-sm">
                        <div class="card-body">
                            <h5 class="card-title mb-1">Quản lý câu hỏi</h5>
                            <p class="card-text text-muted">Tạo/sửa/xoá, phân loại theo kỹ năng & độ khó.</p>
                        </div>
                    </div>
                </a>
            </div>

            <div class="col">
                <a class="admin-card d-block text-decoration-none" asp-area="Admin" asp-controller="Tests" asp-action="Index">
                    <div class="card h-100 shadow-sm">
                        <div class="card-body">
                            <h5 class="card-title mb-1">Quản lý bài test</h5>
                            <p class="card-text text-muted">Tạo test, cấu hình thời gian/điểm qua môn, câu hỏi ngẫu nhiên.</p>
                        </div>
                    </div>
                </a>
            </div>

            <div class="col">
                <a class="admin-card d-block text-decoration-none" asp-area="Admin" asp-controller="Grading" asp-action="Index">
                    <div class="card h-100 shadow-sm">
                        <div class="card-body">
                            <h5 class="card-title mb-1">Chấm điểm & đánh giá</h5>
                            <p class="card-text text-muted">Tự động trắc nghiệm, chấm tự luận thủ công, nhận xét năng lực.</p>
                        </div>
                    </div>
                </a>
            </div>

            <div class="col">
                <a class="admin-card d-block text-decoration-none" asp-area="Admin" asp-controller="Home" asp-action="Index">
                    <div class="card h-100 shadow-sm">
                        <div class="card-body">
                            <h5 class="card-title mb-1">Dashboard</h5>
                            <p class="card-text text-muted">Tổng quan: số bài test, tỉ lệ hoàn thành, top kỹ năng…</p>
                        </div>
                    </div>
                </a>
            </div>

            <div class="col">
                <a class="admin-card d-block text-decoration-none" asp-area="Admin" asp-controller="Settings" asp-action="Index">
                    <div class="card h-100 shadow-sm">
                        <div class="card-body">
                            <h5 class="card-title mb-1">Cấu hình hệ thống</h5>
                            <p class="card-text text-muted">Logo, tên hệ thống, email OTP.</p>
                        </div>
                    </div>
                </a>
            </div

      <div class="col">
  <a class="admin-card d-block text-decoration-none"
     asp-area="Admin" asp-controller="Skills" asp-action="Index">
    <div class="card h-100 shadow-sm">
      <div class="card-body">
        <h5 class="card-title mb-1">Quản lý danh mục kĩ năng</h5>
        <p class="card-text text-muted">Thêm/sửa/xóa danh mục kĩ năng.</p>
      </div>
    </div>
  </a>
</div>
        <div class="col">
  <a class="admin-card d-block text-decoration-none"
     asp-area="Admin" asp-controller="QuestionBanks" asp-action="Index">
    <div class="card h-100 shadow-sm">
      <div class="card-body">
        <h5 class="card-title mb-1">Quản lý ngân hàng câu hỏi</h5>
        <p class="card-text text-muted">Thêm/sửa/xoá ngân hàng câu hỏi.</p>
      </div>
    </div>
  </a>
</div>

        </div>

    </div>
</div>

@section Scripts {
    <script>
        (function () {
          const t = sessionStorage.getItem('dev_jwt');
          if (t) {
            console.log('JWT (dev) on Admin Home:', t);
          } else {
            console.log('Không có JWT trong sessionStorage (prod sẽ không lộ token).');
          }
          fetch('/api/auth/me', { credentials: 'same-origin' })
            .then(r => r.json())
            .then(d => console.log('Auth /api/auth/me (admin):', d))
            .catch(err => console.warn('auth/me error', err));
        })();
    </script>
}
